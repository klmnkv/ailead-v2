# ChatGPT Integration –¥–ª—è AI.LEAD v2

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI ChatGPT –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–æ–º. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

- –ü–æ–¥–¥–µ—Ä–∂–∫—É OpenAI GPT-3.5 –∏ GPT-4
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Anthropic Claude
- –£–¥–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –¥–ª–∏–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (`/iframe`) –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ AI** - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä** - –≤—ã–±–æ—Ä –º–µ–∂–¥—É OpenAI –∏ Anthropic (Claude)
3. **API –ö–ª—é—á** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–∞ API
4. **–ú–æ–¥–µ–ª—å** - –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ (GPT-3.5, GPT-4, GPT-4 Turbo)
5. **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (0-2)** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤
6. **–ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –æ—Ç–≤–µ—Ç–∞
7. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
GET /api/bot/config

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
PUT /api/bot/config
{
  "prompt": "–¢—ã - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä...",
  "auto_process": true,
  "ai": {
    "enabled": true,
    "provider": "openai",
    "model": "gpt-3.5-turbo",
    "api_key": "sk-...",
    "temperature": 0.7,
    "max_tokens": 500
  }
}
```

#### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
POST /api/bot/ai/test
{
  "ai": {
    "enabled": true,
    "provider": "openai",
    "model": "gpt-3.5-turbo",
    "api_key": "sk-...",
    "temperature": 0.7,
    "max_tokens": 500
  }
}

# –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "Connection successful. Response: \"Connection test successful\"",
  "duration": 1234
}
```

#### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
```bash
GET /api/bot/ai/models?provider=openai

# –û—Ç–≤–µ—Ç:
{
  "provider": "openai",
  "models": [
    { "value": "gpt-4", "label": "gpt-4" },
    { "value": "gpt-3.5-turbo", "label": "gpt-3.5-turbo" },
    ...
  ]
}
```

#### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å AI
```bash
POST /api/messages/incoming
{
  "account_id": 12345,
  "lead_id": 67890,
  "message_text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É —É–∑–Ω–∞—Ç—å –æ –≤–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö"
}

# –û—Ç–≤–µ—Ç:
{
  "incoming_message_id": 1,
  "outgoing_message_id": 2,
  "ai_response": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ë—É–¥—É —Ä–∞–¥ –ø–æ–º–æ—á—å –≤–∞–º —É–∑–Ω–∞—Ç—å –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö...",
  "job_id": "123",
  "status": "queued"
}
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```bash
cd api
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ –∞–¥—Ä–µ—Å—É `/iframe`
2. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–í–∫–ª—é—á–∏—Ç—å AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é"
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (OpenAI)
4. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á –æ—Ç OpenAI
5. –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è GPT-3.5 Turbo –¥–ª—è –Ω–∞—á–∞–ª–∞)
6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (0.7 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
7. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"
8. –ï—Å–ª–∏ —Ç–µ—Å—Ç —É—Å–ø–µ—à–µ–Ω, –Ω–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞ OpenAI

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://platform.openai.com/api-keys
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-...`)
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ "API –ö–ª—é—á" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
api/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai.service.ts          # AI —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAI
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messages.controller.ts # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –ª–æ–≥–∏–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ       ‚îú‚îÄ‚îÄ bot.ts                 # API –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ messages.routes.ts     # API –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ iframe.routes.ts       # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å UI
```

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

1. **–í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** ‚Üí `POST /api/messages/incoming`
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Üí Redis (`bot:config`)
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ AI –≤–∫–ª—é—á–µ–Ω** ‚Üí `config.ai.enabled === true`
4. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏** ‚Üí –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ë–î
5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞** ‚Üí OpenAI API
6. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** ‚Üí –í—Ö–æ–¥—è—â–µ–µ + –∏—Å—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
7. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å** ‚Üí Bull queue –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
8. **–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –≤–æ—Ä–∫–µ—Ä** ‚Üí Puppeteer ‚Üí AmoCRM

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: Redis (`bot:config`)
- **–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**: PostgreSQL (`messages` —Ç–∞–±–ª–∏—Ü–∞)
- **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**: Redis (Bull queue)

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI

### –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Temperature)

- **0.0-0.3**: –¢–æ—á–Ω—ã–µ, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã (–¥–ª—è FAQ)
- **0.4-0.7**: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **0.8-1.2**: –ë–æ–ª–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- **1.3-2.0**: –û—á–µ–Ω—å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ, –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–º–∏

### –ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤ (Max Tokens)

- **50-150**: –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- **150-300**: –°—Ä–µ–¥–Ω–∏–µ –æ—Ç–≤–µ—Ç—ã (–ø–∞—Ä–∞–≥—Ä–∞—Ñ)
- **300-500**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **500+**: –î–ª–∏–Ω–Ω—ã–µ, –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: 1 —Ç–æ–∫–µ–Ω ‚âà 4 —Å–∏–º–≤–æ–ª–∞ (–¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞)

## –ú–æ–¥–µ–ª–∏

### OpenAI

| –ú–æ–¥–µ–ª—å | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ | –°—Ç–æ–∏–º–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|----------|----------|-----------|--------------|
| GPT-3.5 Turbo | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê | üí∞ | –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á |
| GPT-4 | ‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | üí∞üí∞üí∞ | –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ |
| GPT-4 Turbo | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | üí∞üí∞ | –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç |

### Anthropic Claude (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

- Claude 3 Opus
- Claude 3 Sonnet
- Claude 3 Haiku

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –¥–∏–∞–ª–æ–≥

```javascript
// –í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
POST /api/messages/incoming
{
  "account_id": 12345,
  "lead_id": 1,
  "message_text": "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç –≤–∞—à–∏ —É—Å–ª—É–≥–∏?"
}

// AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–º–ø—Ç–∞
// –û—Ç–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ AmoCRM
```

### –ü—Ä–∏–º–µ—Ä 2: –î–∏–∞–ª–æ–≥ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

```javascript
// –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
// –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –≤ OpenAI –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

// –ò—Å—Ç–æ—Ä–∏—è:
// User: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ"
// Bot: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
// User: "–ö–∞–∫–∏–µ —É –≤–∞—Å —Ü–µ–Ω—ã?" ‚Üê –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

// AI –≤–∏–¥–∏—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å AI –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```
üì© Processing incoming message from lead 67890
ü§ñ Generating AI response for lead 67890
‚úÖ AI response generated: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ë—É–¥—É —Ä–∞–¥ –ø–æ–º–æ—á—å...
‚úÖ AI response queued for sending: 123
```

### WebSocket —Å–æ–±—ã—Ç–∏—è

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ:

```javascript
socket.on('message:ai_response', (data) => {
  console.log('AI –æ—Ç–≤–µ—Ç:', data.ai_response);
  console.log('Job ID:', data.job_id);
});
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Redis (–Ω–µ –≤ –∫–æ–¥–µ)
- API –∫–ª—é—á–∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ API –æ—Ç–≤–µ—Ç–∞—Ö
- –¢–æ–∫–µ–Ω—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏

## Troubleshooting

### AI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ AI –≤–∫–ª—é—á–µ–Ω –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API —Å–µ—Ä–≤–µ—Ä–∞

### –û—à–∏–±–∫–∞ "AI service is not available"

- AI –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- API –∫–ª—é—á –Ω–µ —É–∫–∞–∑–∞–Ω
- API –∫–ª—é—á –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

### –û—à–∏–±–∫–∞ "OpenAI returned empty response"

- –ü—Ä–æ–±–ª–µ–º–∞ —Å OpenAI API
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI
- –ü—Ä–µ–≤—ã—à–µ–Ω rate limit OpenAI

### –°–ª–∏—à–∫–æ–º –¥–æ—Ä–æ–≥–æ

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPT-3.5 Turbo –≤–º–µ—Å—Ç–æ GPT-4
- –£–º–µ–Ω—å—à–∏—Ç–µ max_tokens
- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ (–≤ –∫–æ–¥–µ)

## –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### OpenAI GPT-3.5 Turbo

- Input: $0.50 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- Output: $1.50 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- **~$0.001 –∑–∞ –æ–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥** (500 —Ç–æ–∫–µ–Ω–æ–≤)

### OpenAI GPT-4

- Input: $30 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- Output: $60 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- **~$0.03 –∑–∞ –æ–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥** (500 —Ç–æ–∫–µ–Ω–æ–≤)

## Roadmap

- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenAI GPT-3.5/GPT-4
- [x] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [x] –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Anthropic Claude
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Function calling)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ OpenAI –∞–∫–∫–∞—É–Ω—Ç–µ
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
